"use strict";$(document).ready(function(){modalParticles();var fyreCloseModal=$('.fyre-close-modal');fyreCloseModal.hide();var ctaBtn=$('#fyre-cta-btn');var floatCover=$('.float-cover-content');var fyreModal=$('#fyre-modal');var fyreVolControls=$('.fyre-waves-controls');ctaBtn.on('click',function(){fyreModal.toggleClass('expanded');floatCover.toggleClass('expanded');fyreVolControls.toggleClass('expanded');ctaBtn.hide();fyreCloseModal.show();});fyreCloseModal.on('click',function(){fyreModal.toggleClass('expanded');fyreModal.removeClass('scrolled');fyreVolControls.toggleClass('expanded');fyreModal.find('.fyre-overflow').removeClass('scrolled');floatCover.toggleClass('expanded');ctaBtn.show();fyreCloseModal.hide();});fyreModalScroll();var newsletterForm=$('#coverNewsletterForm');newsletterForm.on('submit',function(e){newsLetterForm(e);});var contactFormEle=$('#contactForm');contactFormEle.on('submit',function(e){contactForm(e);});loadGoogleMap();injectCustomizations();var tag=document.createElement('script');tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var player;function onYouTubeIframeAPIReady(){player=new YT.Player('cover-video',{height:'315',width:'560',videoId:'4wVmLnQ7OIY',events:{'onReady':onPlayerReady,'onStateChange':onPlayerStateChange}});}
function onPlayerReady(event){event.target.setVolume(0);event.target.playVideo();}
var done=false;});function onPlayerStateChange(event){if(event.data===YT.PlayerState.PLAYING&&!done){done=true;}
event.target.setVolume(0);}
function modalParticles(){particlesJS.load('fyre-particles','static/js/libs/particles.json',function(){});}
function fyreModalScroll(){var fyreModal=$('#fyre-modal');var actualContent=fyreModal.find('.actual-content');var fyreOverflow=fyreModal.find('.fyre-overflow');actualContent.on('scroll',function(){var scrollTop=actualContent.scrollTop();if(scrollTop===0){fyreModal.removeClass('scrolled');fyreOverflow.removeClass('scrolled');}else{fyreModal.addClass('scrolled');fyreOverflow.addClass('scrolled');}});}
function loadGoogleMap(){var fyreMap=$('#fyre-map');var latlng=new google.maps.LatLng(fyreMap.data('latitude'),fyreMap.data('longitude'));var myOptions={zoom:20,center:latlng,mapTypeId:google.maps.MapTypeId.ROADMAP};var map=new google.maps.Map(document.getElementById('fyre-map'),myOptions);var marker=new google.maps.Marker({position:latlng,map:map});}
function newsLetterForm(e){e.preventDefault();var email=$('#newsletterText');var output=$('.fyre-post-message.newsletter');var submit=$('#newsletterSubmit');if(!output.hasClass('hide')){output.addClass('hide');}
if(email.val().length<=0){output.removeClass('hide');output.addClass('fail');output.removeClass('success');output.text('Please enter your email before submitting.');}else{submit.attr('disabled',true);submit.css('opacity','0.5');$.ajax({type:"POST",url:"static/php/newsletter-form.php",data:"email="+ email,success:function(message){newsletterFormStat(message);}});}}
function contactForm(e){e.preventDefault();var name=$('#contactName');var email=$('#contactEmail');var message=$('#contactMessage');var output=$('.fyre-post-message.contactform');var submitBtn=$('#contactSubmit');if(!output.hasClass('hide')){output.addClass('hide');}
if(message.val().length<30){output.removeClass('hide');output.addClass('fail');output.removeClass('success');output.text('Oops! The message has to be longer than 30 characters');}else{submitBtn.attr('disabled',true);submitBtn.css('opacity','0.5');$.ajax({type:"POST",url:"static/php/contact-form.php",data:"name="+ name+"&email="+ email+"&message="+ message,success:function(message){contactFormStat(message);}});}}
function contactFormStat(message){var submitBtn=$('#contactSubmit');submitBtn.attr('disabled',false);submitBtn.css('opacity',1);var output=$('.fyre-post-message.contactform');output.removeClass('hide');if(message.indexOf("FAIL")>-1){output.addClass('fail');output.removeClass('success');output.text(message.replace("FAIL ",""));}else if(message.indexOf("SUCCESS")>-1){output.addClass('success');output.removeClass('fail');output.text(message.replace("SUCCESS ",""));}}
function newsletterFormStat(message){var submit=$('#newsletterSubmit');submit.attr('disabled',false);submit.css('opacity',1);var output=$('.fyre-post-message.newsletter');output.removeClass('hide');if(message.indexOf("FAIL")>-1){output.addClass('fail');output.removeClass('success');output.text(message.replace("FAIL",""));}else if(message.indexOf("SUCCESS")>-1){output.addClass('success');output.removeClass('fail');output.text(message.replace("SUCCESS ",""));}}
function injectCustomizations(){var colorOverlay=$('.colour-overlay');var netOverlay=$('.net-overlay');var bgVideo=$('#cover-video');$.ajax({type:'GET',url:'config.json',dataType:'JSON',data:{},success:function(data){var primaryColor=data.primary_color;var overlayBg=data.cover_bg_overlay_opacity;var netBg=data.cover_net_texture_size;var bgVideoId=data.background_video_id;colorOverlay.css('opacity',overlayBg);netOverlay.css('background-size',netBg);bgVideo.attr('src','https://www.youtube.com/embed/'+ bgVideoId+'?controls=0&showinfo=0&rel=0&autoplay=1&loop=1&iv_load_policy=3&loop=1&enablejsapi=1');var newCSS="#customizer .content .slider-handle,#customizer .content .slider-selection,#customizer .content .fyre-slider,#customizer .handle, #fyre-modal, #fyre-modal:before{background:"+ primaryColor+";} #cover .float-cover-content .text-soon .pri span{color: "+ primaryColor+";}";var injectedCSS=$('#inject-css');if(injectedCSS.length===0){$('head').append('<style type="text/css" id="inject-css">'+ newCSS+'</style>');}else{injectedCSS.html(newCSS);}},error:function(XMLHttpRequest,textStatus,errorThrown){alert(errorThrown+ textStatus+ XMLHttpRequest);}});}